<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chá do Noah 💙</title>
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <link href="https://thiagosbrianez.github.io/cha-do-noah/style.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script src="https://unpkg.com/imask"></script>
</head>

<body>

  <div id="boasVindas">
    <h2>🎉 Seja bem-vindo ao <br>
      <span>Chá do Noah</span>!
    </h2>
    <p>Clique para entrar nessa celebração com a gente 💙</p>
    <button id="entrar">Entrar</button>
  </div>

  <div class="container" data-aos="fade-up">
    <h1>Chá do Noah 💙</h1>
    <img src="https://thiagosbrianez.github.io/cha-do-noah/files/img_ultrassom.jpg" alt="Ultrassom do Noah"
      class="ultrassom">
    <p style="text-align: center;">Estamos muito felizes com a chegada do nosso bebê!
      E se você recebeu este convite, é porque queremos que faça parte desse momento tão especial na nossa vida e na do pequeno Noah. 💙
      <br><br>Queremos muito dividir esse momento com pessoas especiais como você, com sorrisos, abraços, risadas.. e claro,
      alguns pacotes de fraldas também! 😅🍼
      <br><br>Prepare o coração (e o apetite), porque vai ter amor, bolo e aquele cheirinho de bebê no ar! 🎉👣

      <br><br>Ah! Não esqueça de confirmar sua presença lá em baixo, tá? ✅
    </p>
  </div>

  <div class="container" data-aos="fade-up">

    <h3 style="text-align:center">DATA E LOCALIZAÇÃO</h3>

    <!-- Linha com data, hora e botões -->
    <div
      style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 15px; margin-bottom: 20px; text-align: center;">

      <!-- Data e Hora -->
      <div>
        <p style="margin: 0; font-size: 16px;"><strong>🗓️ Data:</strong> 13/07/2025</p>
        <p style="margin: 0; font-size: 16px;"><strong>⏰ Horário:</strong> 12:00hrs</p>
      </div>

      <!-- Botões -->
             <!-- Botões -->
      <div style="display: flex; flex-direction: column; align-items: center; gap: 5px;"> 
        <a href="cha-noah.ics" download
          style="padding: 8px 16px; background: #4285F4; color: white; border-radius: 5px; text-decoration: none; font-weight: 600;">
          🗓️ Adicione ao seu Calendário
        </a>
      </div>     
    </div>

    <!-- Endereço -->
    <div style="text-align: center; margin-bottom: 20px;">
      <p style="font-size: 18px;  margin: 0;">
        📍<strong> Localização:</strong> Rua NBD 4 - Nova Barretos 2 - Barretos/SP
      </p>
    </div>

    <!-- Mapa -->
    <div style="display: flex; justify-content: center;">
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1107.6993990887102!2d-48.53847353191177!3d-20.57606047746824!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94bb9a9fe434e74b%3A0x944c5bd43043fae7!2sR.%20J%C3%BAlio%20Santana%20da%20Rocha%20-%20Barretos%2C%20SP!5e1!3m2!1spt-BR!2sbr!4v1746837072842!5m2!1spt-BR!2sbr"
        width="100%" height="400" style="border:0; border-radius: 8px;" allowfullscreen="" loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>

  </div>
  <div class="container" data-aos="fade-up">
    <h3 style="text-align:center">SUGESTÃO DE PRESENTES 🎁</h3>
    <p>
      • Fralda M ou G 🚼<br>
      • Mimo à sua escolha 🧸
    </p>
  </div>
  <div class="container" data-aos="fade-up">
    <h3 style="text-align:center">OBSERVAÇOES 🍝🍹</h3>
    <p>Vai ter entrada, almoço e bebidas (água, suco e refrigerante)</p>
    <p>Ah, e o famoso <strong>open cooler</strong> 🍻 tá liberado! Pode trazer sua gelada se quiser, só não vale
      esquecer que é chá de bebê, não churrascão de fim de ano! 😄</p>
  </div>

  <div class="container" data-aos="fade-up">
    <h3 style="text-align:center">CONFIRMAÇÃO ✅</h3>
    <p>Confirme sua presença abaixo e venha celebrar esse momento com a gente! </p>
    <form id="formConvite">
      <label for="telefone">Seu WhatsApp:</label>
      <input type="text" name="telefone" id="telefone" required value="(17) ">

      <label for="nome">Seu Nome: </label>
      <input type="text" name="nome" required>

      <label for="acompanhantes">Quantidade de Acompanhantes:</label>
      <input type="number" name="acompanhantes" min="0" value="0">

      <button type="submit">Confirmar Presença</button>
    </form>
  </div>



  <div class="contador-container" style="margin-top: 20px;">
    <div class="contador" id="contador"></div>
  </div>

  <button id="toggleMusicFloating" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 9999;
  background: #0077cc;
  color: white;
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  font-size: 20px;
  cursor: pointer;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  display: none;
">🔈</button>

  <script>
    AOS.init();

    const scriptURL = "https://script.google.com/macros/s/AKfycbzeftPn5me56zfoM-E0L1j_z9AI0h2Bn_S9gdmTFAw43sE-i9nP6guCII7p8p5nzCtm/exec";
    const form = document.getElementById("formConvite");

    document.addEventListener("DOMContentLoaded", function () {
      const celularInput = document.getElementById('telefone');
      const form = document.getElementById('formConvite');

      if (celularInput) {
        IMask(celularInput, {
          mask: '(00) 00000-0000',
          lazy: false
        });
      }

      form.addEventListener("submit", async function (e) {
        e.preventDefault();

        const telefone = form.telefone.value.replace(/\D/g, '');
        const nome = form.nome.value.trim();

        if (telefone.length !== 11) {
          Swal.fire({
            icon: 'error',
            title: 'Telefone inválido',
            text: 'Digite um número com 9 dígitos após o DDD.'
          });
          return;
        }

        if (nome.length < 2 || !/^[A-Za-zÀ-ú\s]+$/.test(nome)) {
          Swal.fire({
            icon: 'error',
            title: 'Nome inválido',
            text: 'Por favor, insira um nome válido.'
          });
          return;
        }

        const formData = new URLSearchParams();
        formData.append("nome", form.nome.value);
        formData.append("telefone", form.telefone.value);
        formData.append("acompanhantes", form.acompanhantes.value);
        formData.append("secretKey", "noah2025unico");

        try {
          Swal.fire({
            title: "Enviando confirmação...",
            allowOutsideClick: false,
            didOpen: () => Swal.showLoading()
          });

          const response = await fetch(scriptURL, {
            method: "POST",
            body: formData
          });

          const result = await response.json();
          Swal.close();

          if (result.status === "existe") {
            Swal.fire({
              title: "Você já confirmou!",
              text: "Deseja atualizar os dados da sua presença?",
              icon: "question",
              showCancelButton: true,
              confirmButtonText: "Sim, atualizar",
              cancelButtonText: "Cancelar"
            }).then(async (res) => {
              if (res.isConfirmed) {
                formData.set("update", true);
                Swal.fire({
                  title: "Atualizando...",
                  allowOutsideClick: false,
                  didOpen: () => Swal.showLoading()
                });
                await fetch(scriptURL, {
                  method: "POST",
                  body: formData
                });
                Swal.close();
                Swal.fire("Presença atualizada com sucesso!", "", "success");
                form.reset();
              }
            });
          } else {
            Swal.fire({
              title: "Presença solicitada!",
              html: "Em breve um dos papais vai entrar em contato.<br>Nos vemos lá! 💙",
              icon: "success"
            });
            form.reset();
          }
        } catch (err) {
          Swal.close();
          console.error("Erro:", err);
          Swal.fire("Erro ao enviar confirmação", "Tente novamente mais tarde.", "error");
        }
      });

    });
    const countdown = () => {
      const evento = new Date("2025-07-13T12:00:00").getTime();
      const agora = new Date().getTime();
      const distancia = evento - agora;

      if (distancia < 0) {
        document.getElementById("contador").innerHTML = "É hoje! 🎉";
        return;
      }

      const dias = Math.floor(distancia / (1000 * 60 * 60 * 24));
      const horas = Math.floor((distancia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutos = Math.floor((distancia % (1000 * 60 * 60)) / (1000 * 60));
      const segundos = Math.floor((distancia % (1000 * 60)) / 1000);

      document.getElementById("contador").innerHTML =
        `Faltam ${dias} dias, ${horas}h ${minutos}m ${segundos}s`;
    };

    setInterval(countdown, 1000);


    const audio = new Audio('https://thiagosbrianez.github.io/cha-do-noah/files/msc_ostentacao.mp3');
    audio.loop = true;
    audio.volume = 0.3;

    document.getElementById('entrar').addEventListener('click', () => {
      audio.play();
      document.getElementById('boasVindas').style.display = 'none';
    });

    const toggleBtn = document.getElementById('toggleMusicFloating');

    // Exibe o botão flutuante após o play inicial
    document.getElementById('entrar').addEventListener('click', () => {
      toggleBtn.style.display = 'block';
    });

    // Alternar música ao clicar no botão flutuante
    toggleBtn.addEventListener('click', () => {
      if (audio.paused) {
        audio.play();
        toggleBtn.textContent = '🔈';
      } else {
        audio.pause();
        toggleBtn.textContent = '🔇';
      }
    });


  </script>
</body>

</html>